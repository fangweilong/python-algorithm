import numpy as np
from sklearn.cluster import DBSCAN
import sys

# 数据示例
# 0.1 4 120.376976,30.302238;121.614158,31.338742;120.94203,31.192761;116.809112,39.997073;114.037936,23.02038;103.965969,30.749631;119.713782,31.992064;116.576102,39.817948;119.644303,31.960263;113.225334,22.918048;117.593012,38.980737;113.528782,22.755996;118.158504,35.201466;113.380239,23.131597;114.419648,30.507558;114.413023,30.479778;114.53378,30.493248;116.738284,39.601632;120.533832,31.923096;119.534151,31.728356;114.427483,30.493842;117.09846,39.082932;120.545829,31.283015;116.445848,39.942511;114.144186,30.618428;117.126466,39.097485;117.713287,39.029668;112.95171,28.179149;117.129443,39.102821;121.512238,31.348349;117.076324,39.089108;116.327341,39.982368;116.307425,39.829446;116.164059,40.07047;116.357614,39.983411;117.159874,39.129141;116.375484,39.985605;117.09846,39.082932;121.433684,31.116408;116.307062,39.916897;116.488403,39.996973;113.869202,22.573107;114.427532,30.480111;121.359628,31.223119;114.417208,30.513161;114.413023,30.479778;113.940409,22.635157;121.058087,31.288749;116.307062,39.916897;114.34314,30.50949;114.408664,30.448144;114.416127,30.463089;114.4898,30.508344;114.41505,30.48153;120.399411,33.166181

#当前目录
baseDir = os.path.dirname(os.path.abspath(__file__))
# 导入utils工具
sys.path.append(baseDir+'../../../common')
import handle_data

# 邻域 密度阈值
dbscan = DBSCAN(eps=float(sys.argv[1]), min_samples=int(sys.argv[2]))

# 要分类的数据点
data = handle_data.split_date(sys.argv[3])

dbscan.fit(data)
label_pred = dbscan.labels_
print(label_pred)